<ng-container *ngIf="(model$ | async) as model">
  <mat-toolbar color="accent">
    A vista d'ocell
    <span class="spacer"></span>
    <button *ngIf="locationError" mat-icon-button class="no-border no-background" (click)="enableGeolocation()">
      <span class="material-icons">location_off</span>
    </button>
    <button mat-icon-button class="no-border no-background" [matMenuTriggerFor]="opcions">
      <span class="material-icons">filter_alt</span>
    </button>
    <mat-menu #opcions="matMenu">
      <div class="smaller color-medium-gray pl-05 italic">ORDENA</div>
      <mat-radio-group>
        <mat-radio-button
          *ngFor="let o of orders; index as i"
          class="block p-1"
          [checked]="order === i"
          (click)="order = i"
          [value]="i">
            <span>{{ o }}</span>
        </mat-radio-button>
      </mat-radio-group>

      <mat-divider></mat-divider>

      <div class="smaller color-medium-gray pl-05 pt-05 italic">CODIS POSTALS</div>
      <mat-checkbox
        *ngFor="let code of model.codes; index as i"
        class="block p-1"
        [checked]="code.enabled"
        (change)="toggleCode(i)">
          {{ code.code }}
      </mat-checkbox>
    </mat-menu>
  </mat-toolbar>

  <mat-action-list>
    <button mat-list-item *ngFor="let panorama of model.panoramas" (click)="showPanorama(panorama)">
      <div mat-line class="larger">{{ panorama.name }}</div>
      <div mat-line class="color-dark-gray">{{ POSTAL_CODES[panorama.postalCode] }} ({{ panorama.postalCode }})</div>
      <div mat-line *ngIf="panorama.distance" class="small italic"><b>{{ panorama.distance | number:'1.0-2'}} kms</b> en l√≠nia recta</div>
      <span class="material-icons">house</span>
    </button>
  </mat-action-list>
</ng-container>
